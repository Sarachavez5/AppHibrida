// =============================================================================
// MIXINS Y UTILIDADES
// =============================================================================

// Mixin para flexbox
@mixin flex($direction: row, $justify: flex-start, $align: stretch, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
  flex-wrap: $wrap;
}

// Mixin para centrado absoluto
@mixin center-absolute {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Mixin para botones
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-sm) var(--spacing-lg);
  border: none;
  border-radius: var(--border-radius-md);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  cursor: pointer;
  transition: all var(--transition-normal);
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  
  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
  
  &:active {
    transform: scale(0.98);
  }
}

// Mixin para botón primario
@mixin button-primary {
  @include button-base;
  background-color: var(--color-primary);
  color: var(--color-text-light);
  
  &:hover {
    background-color: var(--color-primary-dark);
  }
  
  &:disabled {
    background-color: var(--color-text-muted);
    cursor: not-allowed;
    transform: none;
  }
}

// Mixin para botón secundario
@mixin button-secondary {
  @include button-base;
  background-color: transparent;
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
  
  &:hover {
    background-color: var(--color-primary);
    color: var(--color-text-light);
  }
  
  &:disabled {
    border-color: var(--color-text-muted);
    color: var(--color-text-muted);
    cursor: not-allowed;
    transform: none;
  }
}

// Mixin para inputs
@mixin input-base {
  width: 100%;
  padding: var(--spacing-md);
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius-md);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base);
  background-color: var(--color-background);
  color: var(--color-text-primary);
  transition: border-color var(--transition-normal);
  
  &:focus {
    outline: none;
    border-color: var(--color-primary);
  }
  
  &::placeholder {
    color: var(--color-text-muted);
  }
}

// Mixin para cards
@mixin card-base {
  background-color: var(--color-background);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-md);
  padding: var(--spacing-lg);
  transition: box-shadow var(--transition-normal);
  
  &:hover {
    box-shadow: var(--shadow-lg);
  }
}

// Mixin para responsive
@mixin mobile {
  @media (max-width: 767px) {
    @content;
  }
}

@mixin tablet {
  @media (min-width: 768px) and (max-width: 1023px) {
    @content;
  }
}

@mixin desktop {
  @media (min-width: 1024px) {
    @content;
  }
}

// Mixin para safe area (para dispositivos con notch)
@mixin safe-area($property: padding) {
  #{$property}-top: env(safe-area-inset-top);
  #{$property}-bottom: env(safe-area-inset-bottom);
  #{$property}-left: env(safe-area-inset-left);
  #{$property}-right: env(safe-area-inset-right);
}

// Mixin para animaciones de entrada
@mixin fade-in($duration: 0.3s) {
  animation: fadeIn $duration ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Mixin para micro-interacciones
@mixin ripple-effect {
  position: relative;
  overflow: hidden;
  
  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.3s, height 0.3s;
  }
  
  &:active::after {
    width: 300px;
    height: 300px;
  }
}

// Mixin para scroll suave
@mixin smooth-scroll {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

// Mixin para texto truncado
@mixin text-truncate($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
